<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CentOS 6.7 安装 Oracle 11g2 | 尼玛豹哥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一、准备工作1 配hosts文件1$ sudo vi &#x2F;etc&#x2F;hosts 添加以下内容： 1192.168.1.58 oracle 2 关闭SELINUX12$ sudo setenforce 0$ sudo vi &#x2F;etc&#x2F;selinux&#x2F;config 修改文件内容： 1SELINUX&#x3D;disabled 3 关闭防火墙1$ sudo service iptables stop 4 安装依赖包1">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS 6.7 安装 Oracle 11g2">
<meta property="og:url" content="http://blog.yangxc.com/2019/04/01/centos6-7-oracle/index.html">
<meta property="og:site_name" content="尼玛豹哥">
<meta property="og:description" content="一、准备工作1 配hosts文件1$ sudo vi &#x2F;etc&#x2F;hosts 添加以下内容： 1192.168.1.58 oracle 2 关闭SELINUX12$ sudo setenforce 0$ sudo vi &#x2F;etc&#x2F;selinux&#x2F;config 修改文件内容： 1SELINUX&#x3D;disabled 3 关闭防火墙1$ sudo service iptables stop 4 安装依赖包1">
<meta property="og:locale">
<meta property="article:published_time" content="2019-04-01T06:15:23.000Z">
<meta property="article:modified_time" content="2021-04-13T02:59:22.287Z">
<meta property="article:author" content="YangXC">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="oracle">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="尼玛豹哥" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 5.3.0"></head>
<body>
  <div id="container">
    <div id="wrap">
      <div id="blog-header">
  <img src="/images/avatar.jpg">
  <div id="blog-title">尼玛豹哥</div>
</div>
<hr id="header-line">

      <div class="outer">
        <section id="main"><article id="post-centos6-7-oracle" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CentOS 6.7 安装 Oracle 11g2
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2019/04/01/centos6-7-oracle/" class="article-date">
  <time datetime="2019-04-01T06:15:23.000Z" itemprop="datePublished">2019-04-01</time>
</a>
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h1><h2 id="1-配hosts文件"><a href="#1-配hosts文件" class="headerlink" title="1 配hosts文件"></a>1 配hosts文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/hosts</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.58 oracle</span><br></pre></td></tr></table></figure>
<h2 id="2-关闭SELINUX"><a href="#2-关闭SELINUX" class="headerlink" title="2 关闭SELINUX"></a>2 关闭SELINUX</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo setenforce 0</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/selinux/config</span></span><br></pre></td></tr></table></figure>
<p>修改文件内容：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SELINUX</span>=disabled</span><br></pre></td></tr></table></figure>
<h2 id="3-关闭防火墙"><a href="#3-关闭防火墙" class="headerlink" title="3 关闭防火墙"></a>3 关闭防火墙</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service iptables stop</span></span><br></pre></td></tr></table></figure>
<h2 id="4-安装依赖包"><a href="#4-安装依赖包" class="headerlink" title="4 安装依赖包"></a>4 安装依赖包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install binutils compat-libstdc++ cpp elfutils elfutils-libelf elfutils-libelf-devel elfutils-libs gcc gcc-c++ glibc glibc-common glibc-devel glibc-headers ksh libaio libaio-devel libgcc libgomp libstdc++ libstdc++-devel make mpfr nss-softokn-freebl sysstat tzdata-java unixODBC unixODBC-devel cloog-ppl kernel-headers libtool-ltdl ppl</span></span><br></pre></td></tr></table></figure>
<h2 id="5-创建用户、组"><a href="#5-创建用户、组" class="headerlink" title="5 创建用户、组"></a>5 创建用户、组</h2><p>没有建特别的用户组，直接用了默认的，并把oracle加入sudo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo adduser oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo passwd oracle</span></span><br></pre></td></tr></table></figure>
<h2 id="6-创建安装目录"><a href="#6-创建安装目录" class="headerlink" title="6 创建安装目录"></a>6 创建安装目录</h2><p>把oracle安装在 <code>/opt/oracle</code> 下面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir -p /opt/oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir -p /opt/oracle/product/112010/db_1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir /opt/oracle/oradata</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir /opt/oracle/inventory</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir /opt/oracle/flash_recovery_area</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chown -R oracle:oracle /opt/oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod -R 775 /opt/oracle</span></span><br></pre></td></tr></table></figure>
<h2 id="7-修改内核参数"><a href="#7-修改内核参数" class="headerlink" title="7 修改内核参数"></a>7 修改内核参数</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/sysctl.conf</span></span><br></pre></td></tr></table></figure>
<p>修改文件内容：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fs.aio-max-nr</span> = <span class="number">1048576</span>  <span class="comment"># 指的是可以同时拥有异步I/O请求的数目，Oracle推荐的值为1048576（1024×1024），也就是1024Kb个。</span></span><br><span class="line"><span class="attr">fs.file-max</span> = <span class="number">6815744</span>  <span class="comment"># 系统所有进程一共可以打开的文件数量 64bytes  cat /proc/sys/fs/file-nr 在&#x27;高负荷&#x27;的情况，看看有多少文件描述符都在使用。</span></span><br><span class="line"><span class="attr">kernel.shmmni</span> = <span class="number">4096</span>  <span class="comment"># 整个系统共享内存段的最大数量。</span></span><br><span class="line"><span class="attr">kernel.sem</span> = <span class="number">250</span> <span class="number">32000</span> <span class="number">100</span> <span class="number">128</span></span><br><span class="line">    <span class="comment"># 1.同一类信号的最多数量(semmsl)。</span></span><br><span class="line">    <span class="comment"># 2.系统中信号的最多数目，=semmni*semmsl (semmns)。</span></span><br><span class="line">    <span class="comment"># 3.每个semop系统调用所包含的最大的操作数(能调用的信号量的最多次数) (semopm)。</span></span><br><span class="line">    <span class="comment"># 4.系统中信号类型的数目的最大值，一个信号量标识符代表一个类型(semmni)。</span></span><br><span class="line"><span class="attr">net.ipv4.ip_local_port_range</span> = <span class="number">32768</span> <span class="number">61000</span>  <span class="comment"># 表示TCP/UDP协议打开的本地端口号。 默认设置：1024 4999 建议设置：32768 61000。</span></span><br><span class="line"><span class="attr">net.core.rmem_default</span> = <span class="number">262144</span>  <span class="comment"># 设置接收socket的缺省缓存大小(字节)。</span></span><br><span class="line"><span class="attr">net.core.rmem_max</span> = <span class="number">4194304</span>  <span class="comment"># 设置接收socket的最大缓存大小(字节)</span></span><br><span class="line"><span class="attr">net.core.wmem_default</span> = <span class="number">212992</span>  <span class="comment"># 设置发送的socket缺省缓存大小(字节)</span></span><br><span class="line"><span class="attr">net.core.wmem_max</span> = <span class="number">1048576</span>  <span class="comment"># 设置发送的socket最大缓存大小(字节)</span></span><br></pre></td></tr></table></figure>
<p>保存后执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo sysctl -p</span></span><br></pre></td></tr></table></figure>
<h2 id="8-修改用户限制文件（配置项未理解）"><a href="#8-修改用户限制文件（配置项未理解）" class="headerlink" title="8 修改用户限制文件（配置项未理解）"></a>8 修改用户限制文件（配置项未理解）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/security/limits.conf</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oracle          soft    nproc   2047</span><br><span class="line">oracle          hard    nproc   16384</span><br><span class="line">oracle          soft    nofile  1024</span><br><span class="line">oracle          hard    nofile  65536</span><br><span class="line">oracle          soft    stack   10240</span><br></pre></td></tr></table></figure>
<h2 id="9-关联设置（暂时不知道干嘛用的）"><a href="#9-关联设置（暂时不知道干嘛用的）" class="headerlink" title="9 关联设置（暂时不知道干嘛用的）"></a>9 关联设置（暂时不知道干嘛用的）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/pam.d/login</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session required  /lib64/security/pam_limits.so</span><br><span class="line">session required   pam_limits.so</span><br></pre></td></tr></table></figure>
<h2 id="10-修改-etc-profile（暂时不知道干嘛用的）"><a href="#10-修改-etc-profile（暂时不知道干嘛用的）" class="headerlink" title="10 修改/etc/profile（暂时不知道干嘛用的）"></a>10 修改/etc/profile（暂时不知道干嘛用的）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/profile</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> = <span class="string">&quot;oracle&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$SHELL</span> = <span class="string">&quot;/bin/ksh&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">ulimit</span> -p 16384</span><br><span class="line">        <span class="built_in">ulimit</span> -n 65536</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">ulimit</span> -u 16384 -n 65536</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>切换至root账号下使之生效：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su root</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure>
<h2 id="11-修改oracle用户环境变量"><a href="#11-修改oracle用户环境变量" class="headerlink" title="11 修改oracle用户环境变量"></a>11 修改oracle用户环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi .bash_profile</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for oracle</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_BASE=/opt/oracle;</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/opt/oracle/product/112010/db_1</span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=orcl;</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:<span class="variable">$ORACLE_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ORACLE_HOME</span>/lib:/usr/lib</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> = <span class="string">&quot;oracle&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$SHELL</span> = <span class="string">&quot;/bin/ksh&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">ulimit</span> -p 16384</span><br><span class="line">        <span class="built_in">ulimit</span> -n 65536</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">ulimit</span> -u 16384 -n 65536</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">umask</span> 022</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>使之生效：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> .bash_profile</span></span><br></pre></td></tr></table></figure>
<p>此时若命令执行失败，提示：<code>-bash: ulimit: open files: cannot modify limit: Operation not permitted</code>，是因为ssh登录的缘故，需要修改sshd配置如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/ssh/sshd_config</span></span><br></pre></td></tr></table></figure>
<p>把UseLogin改为yes，重启ssh：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service sshd restart</span></span><br></pre></td></tr></table></figure>
<p>重点，这里重启完sshd之后，一定要exit后重新用ssh连接，否则依然会报错</p>
<h1 id="二、正式开始安装"><a href="#二、正式开始安装" class="headerlink" title="二、正式开始安装"></a>二、正式开始安装</h1><h2 id="1-准备安装文件"><a href="#1-准备安装文件" class="headerlink" title="1 准备安装文件"></a>1 准备安装文件</h2><p>把解压后的database文件夹放到 <code>/opt/oralce/</code> 下</p>
<h2 id="2-编辑oracle数据库安装应答文件"><a href="#2-编辑oracle数据库安装应答文件" class="headerlink" title="2 编辑oracle数据库安装应答文件"></a>2 编辑oracle数据库安装应答文件</h2><p>修改db_install.rsp</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi db_install.rsp</span></span><br></pre></td></tr></table></figure>
<p>修改文件内容：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">oracle.install.option</span>=INSTALL_DB_SWONLY  <span class="comment"># 29行 安装类型</span></span><br><span class="line"><span class="attr">ORACLE_HOSTNAME</span>=chances  <span class="comment"># 37行 主机名称</span></span><br><span class="line"><span class="attr">UNIX_GROUP_NAME</span>=oracle  <span class="comment"># 42行 安装组</span></span><br><span class="line"><span class="attr">INVENTORY_LOCATION</span>=/opt/oracle/inventory  <span class="comment"># 47行 INVENTORY目录</span></span><br><span class="line"><span class="attr">SELECTED_LANGUAGES</span>=en,zh_CN  <span class="comment"># 78行 选择语言，可能因为linux是en的，所以这里一定要加上en</span></span><br><span class="line"><span class="attr">ORACLE_HOME</span>=/opt/oracle/product/<span class="number">112010</span>/db_1  <span class="comment"># 83行 oracle_home</span></span><br><span class="line"><span class="attr">ORACLE_BASE</span>=/opt/oracle  <span class="comment"># 88行 oracle_base</span></span><br><span class="line"><span class="attr">oracle.install.db.InstallEdition</span>=EE  <span class="comment"># 99行 oracle版本</span></span><br><span class="line"><span class="attr">oracle.install.db.DBA_GROUP</span>=oracle  <span class="comment"># 142行 dba用户组</span></span><br><span class="line"><span class="attr">oracle.install.db.OPER_GROUP</span>=oracle  <span class="comment"># 147行 oper用户组</span></span><br><span class="line"><span class="attr">oracle.install.db.config.starterdb.type</span>=GENERAL_PURPOSE  <span class="comment"># 160行 数据库类型</span></span><br><span class="line"><span class="attr">oracle.install.db.config.starterdb.globalDBName</span>=orcl  <span class="comment"># 165行 globalDBName</span></span><br><span class="line"><span class="attr">oracle.install.db.config.starterdb.SID</span>=orcl  <span class="comment"># 170行 SID</span></span><br><span class="line"><span class="attr">oracle.install.db.config.starterdb.memoryLimit</span>=<span class="number">800</span>  <span class="comment"># 200行 自动管理内存的最小内存(M)</span></span><br><span class="line"><span class="attr">oracle.install.db.config.starterdb.password.ALL</span>=xxxx  <span class="comment"># 233行 设定所有数据库用户使用同一个密码</span></span><br><span class="line"><span class="attr">DECLINE_SECURITY_UPDATES</span>=<span class="literal">true</span>  <span class="comment"># 385行 设置安全更新</span></span><br></pre></td></tr></table></figure>
<h2 id="3-开始安装"><a href="#3-开始安装" class="headerlink" title="3 开始安装"></a>3 开始安装</h2><p>用oracle账号进入 <code>/opt/oracle/database/</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /opt/oracle/database/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./runInstaller -silent -responseFile /opt/oracle/database/response/db_install.rsp -ignorePrereq</span></span><br></pre></td></tr></table></figure>
<p>在日志里看到这个就成功了：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/opt/</span>oracle<span class="regexp">/inventory/</span>orainstRoot.sh</span><br><span class="line"><span class="regexp">/opt/</span>oracle<span class="regexp">/product/</span><span class="number">112010</span><span class="regexp">/db_1/</span>root.sh</span><br><span class="line">To execute the configuration scripts:</span><br><span class="line">        <span class="number">1</span>. Open a terminal window</span><br><span class="line">        <span class="number">2</span>. Log in as <span class="string">&quot;root&quot;</span></span><br><span class="line">        <span class="number">3</span>. Run the scripts</span><br><span class="line">        <span class="number">4</span>. <span class="keyword">Return</span> to <span class="keyword">this</span> window and hit <span class="string">&quot;Enter&quot;</span> key to <span class="keyword">continue</span></span><br></pre></td></tr></table></figure>
<p>用root用户登录按提示执行脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/oracle/inventory/orainstRoot.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> /opt/oracle/product/112010/db_1/root.sh</span></span><br></pre></td></tr></table></figure>
<h2 id="4-配置监听"><a href="#4-配置监听" class="headerlink" title="4 配置监听"></a>4 配置监听</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /opt/oracle/database/response/netca.rsp</span></span><br></pre></td></tr></table></figure>
<p>检查这些参数：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">INSTALL_TYPE</span>=<span class="string">&quot;&quot;</span>custom<span class="string">&quot;&quot;</span>  <span class="comment">#安装的类型</span></span><br><span class="line"><span class="attr">LISTENER_NUMBER</span>=<span class="number">1</span>  <span class="comment">#监听器数量</span></span><br><span class="line"><span class="attr">LISTENER_NAMES</span>=&#123;<span class="string">&quot;LISTENER&quot;</span>&#125;  <span class="comment">#监听器的名称列表</span></span><br><span class="line"><span class="attr">LISTENER_PROTOCOLS</span>=&#123;<span class="string">&quot;TCP;1521&quot;</span>&#125;  <span class="comment">#监听器使用的通讯协议列表</span></span><br><span class="line"><span class="attr">LISTENER_START</span>=<span class="string">&quot;&quot;</span>LISTENER<span class="string">&quot;&quot;</span>  <span class="comment">#监听器启动的名称</span></span><br></pre></td></tr></table></figure>
<p>保存后运行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> netca -silent -responseFile /opt/oracle/database/response/netca.rsp</span></span><br></pre></td></tr></table></figure>
<h1 id="三、添加数据库实例"><a href="#三、添加数据库实例" class="headerlink" title="三、添加数据库实例"></a>三、添加数据库实例</h1><h2 id="1-检查配置"><a href="#1-检查配置" class="headerlink" title="1 检查配置"></a>1 检查配置</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">RESPONSEFILE_VERSION</span> = <span class="string">&quot;11.2.0&quot;</span>  <span class="comment">#不能更改</span></span><br><span class="line"><span class="attr">OPERATION_TYPE</span> = <span class="string">&quot;createDatabase&quot;</span></span><br><span class="line"><span class="attr">GDBNAME</span> = <span class="string">&quot;orcl&quot;</span>  <span class="comment">#数据库的名字</span></span><br><span class="line"><span class="attr">SID</span> = <span class="string">&quot;ORCL&quot;</span>  <span class="comment">#对应的实例名字</span></span><br><span class="line"><span class="attr">TEMPLATENAME</span> = <span class="string">&quot;General_Purpose.dbc&quot;</span>  <span class="comment">#建库用的模板文件</span></span><br><span class="line"><span class="attr">SYSPASSWORD</span> = <span class="string">&quot;oracle&quot;</span>  <span class="comment">#SYS管理员密码</span></span><br><span class="line"><span class="attr">SYSTEMPASSWORD</span> = <span class="string">&quot;sys&quot;</span>  <span class="comment">#SYSTEM管理员密码</span></span><br><span class="line"><span class="attr">SYSMANPASSWORD</span> = <span class="string">&quot;sys&quot;</span></span><br><span class="line"><span class="attr">DBSNMPPASSWORD</span> = <span class="string">&quot;sys&quot;</span></span><br><span class="line"><span class="attr">DATAFILEDESTINATION</span> = /opt/oracle/oradata  <span class="comment">#数据文件存放目录</span></span><br><span class="line"><span class="attr">RECOVERYAREADESTINATION</span> = /opt/oracle/flash_recovery_area  <span class="comment">#恢复数据存放目录</span></span><br><span class="line"><span class="attr">CHARACTERSET</span> = <span class="string">&quot;ZHS16GBK&quot;</span>  <span class="comment">#字符集，重要!!!建库后一般不能更改，所以建库前要确定清楚。</span></span><br><span class="line"><span class="attr">TOTALMEMORY</span> = <span class="string">&quot;10240&quot;</span>  <span class="comment">#10240MB，物理内存10G。</span></span><br></pre></td></tr></table></figure>
<h2 id="2-安装实例"><a href="#2-安装实例" class="headerlink" title="2 安装实例"></a>2 安装实例</h2><p>进入oracle的bin目录运行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dbca -silent -responseFile /opt/oracle/database/response/dbca.rsp</span></span><br></pre></td></tr></table></figure>
<p>查看实例进程：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ps -ef | grep ora_ | grep -v grep</span></span><br></pre></td></tr></table></figure>
<p>查看监听状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl status</span></span><br></pre></td></tr></table></figure>
<p>修改以下几个文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /opt/oracle/product/112010/db_1/bin/dbstart</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ORACLE_HOME_LISTNER</span>=<span class="variable">$ORACLE_HOME</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /opt/oracle/product/112010/db_1/bin/dbshut</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ORACLE_HOME_LISTNER</span>=<span class="variable">$ORACLE_HOME</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/oratab</span></span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">orcl:/opt/oracle/product/112010/db_1:Y</span><br></pre></td></tr></table></figure>
<p>使用 <code>dbshut、dbstart</code> 可以测试，查看监听状态</p>
<h1 id="四、结束"><a href="#四、结束" class="headerlink" title="四、结束"></a>四、结束</h1><p>打开selinux</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/selinux/config</span></span><br></pre></td></tr></table></figure>
      

      
        
    </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/04/01/chromium-startup/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Chromium学习笔记：程序启动入口分析（Windows）
        
      </div>
    </a>
  
  
    <a href="/2018/04/12/about-ubuntu/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ubuntu相关笔记</div>
    </a>
  
</nav>

  
</article>


</section>
        <aside id="sidebar">
  <nav class="menus">
  	<ul>
  		<li><a href="/"><i class="icon icon-home"></i></a></li>
  		
			<li><a href="/archives"><i class="icon icon-fenlei"></i></a></li>
  		
  		
			<li><a href="/tags"><i class="icon icon-tag"></i></a></li>
  		
  		
  			<li><a href="https://github.com/singlesword" target="_blank"><i class="icon icon-github"></i></a></li>
  		
  	</ul>
  </nav>
  <a id="go-top" href="#"><i class="icon icon-up"></i></a>
</aside>

      </div>
      <footer id="footer">
  
	<div id="footer-info" class="inner">
	  &copy; 2021 YangXC 
	  - Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	  - Theme <a href="https://github.com/hejianxian/hexo-theme-jane/" target="_blank">Jane</a>
	</div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tag</a>
  
    <a target="_blank" rel="noopener" href="https://github.com/singlesword" class="mobile-nav-link">Github</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>